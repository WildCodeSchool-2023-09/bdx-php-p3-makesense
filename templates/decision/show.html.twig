{% extends 'base.html.twig' %}

{% block title %}Decision{% endblock %}


{% block body %}
    <div class="square-container-column-decision">
        <div class="dates-container">
            <div>
            <h2>Dates à retenir</h2>
            </div>
            <div class="date-child">
                <p>{{ decision.startingDate ? decision.startingDate|date('Y-m-d') : '' }}</p>
                <p class="decision-starting">Prise de décision commencée</p>
            </div>
            <div class="date-child">
                <p>{{ decision.deadlineOpinion ? decision.deadlineOpinion|date('Y-m-d') : '' }} </p>
                <p class="give-opinion">Donner son avis</p>
            </div>
            <div class="date-child">
                <p>{{ decision.deadlineDecision ? decision.deadlineDecision|date('Y-m-d') : '' }}</p>
                <p class="decision-taken">Première décision prise</p>
            </div>
            <div class="date-child">
                <p>{{ decision.deadlineConflict ? decision.deadlineConflict|date('Y-m-d') : '' }}</p>
                <p class="conflict">Rentrer en conflit:</p>
            </div>
            <div class="date-child">
                <p> {{ decision.deadlineFinal ? decision.deadlineFinal|date('Y-m-d') : '' }}</p>
                <p class="decision-ending">Décision définitive</p>
            </div>
        </div>
        <div class="other-container">
           <h1> {{ decision.title }} </h1>
            <div>
                <h2> Descritpion <i class="fa-solid fa-chevron-down"></i></h2>
            </div>
            <div class="decisionP">
                <p>{{ decision.description }} </p>
            </div>
            <div>
                <h2> Impact sur l’organisation <i class="fa-solid fa-chevron-down"></i></h2>
            </div>
            <div class="decisionP">
                <p>{{ decision.impact }}</p>
            </div>
            <div>
                <h2> Situation actuelle <i class="fa-solid fa-chevron-down"></i></h2>
            </div>
            <div class="decisionP">
                <p>{{ decision.context }}</p>
            </div>
            <div>
                <h2> Les bénéfices <i class="fa-solid fa-chevron-down"></i></h2>
            </div>
            <div class="decisionP">
                <p>{{ decision.benefits }}</p>
            </div>
            <div>
                <h2> Les risques <i class="fa-solid fa-chevron-down"></i></h2>
            </div>
            <div class="decisionP">
                <p>{{ decision.risk }}</p>
            </div>

            <div>
                <h2> Avis sur la décision <i class="fa-solid fa-chevron-down"></i></h2>
            </div>
            {% for opinion in decision.opinions %}
                <div class="decisionP ">
                    <p>{{ opinion.getAuthor().getFirstname }} - {{ opinion.getText() }}</p>
                </div>
            {% endfor %}

            <div class="withMarginTop">
                <a class="button" href="{{ path('new_opinion', {'id': decision.id}) }}"> Donner votre avis </a>
            </div>
        </div>
        <div class="impacted-person">
        <div>
            <h2> Les personne impactées</h2>
        </div>
        {% for user in users %}
            <li>{{ user.firstname }}</li>
        {% endfor %}
            <div>
                <h2> Les personne experte</h2>
            </div>
            {% for user in userExpert %}
                <li>{{ user.firstname }}</li>
            {% endfor %}
            <div>
                <h2> Les groupes impactés</h2>
            </div>
            {% for group in groupes %}
                <li>{{ group.name }}</li>
            {% endfor %}
        <div class="withMarginTop">
            <a class="button" href="{{ path('new_opinion', {'id': decision.id}) }}"> Donner votre avis </a>
        </div>
        </div>
    </div>

    <div>
        <a href="{{ path('app_decision_index') }}">Retour à la liste</a>
        <a href="{{ path('app_decision_edit', {'id': decision.id}) }}">Modifier</a>
        {{ include('decision/_delete_form.html.twig') }}
    </div>
{% endblock %}
